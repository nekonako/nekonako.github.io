{"pageProps":{"post":{"title":"Membuat widget sederhana di awesomewm","date":"2021-3-16","slug":"1-tutorial-awesomewm","desc":"Tulisan awesomewm pertama, membahas tentang cara membuat widget awesomewm","tags":["linux","awesomewm"],"content":"<p>Pada tulisan kali ini kita akan membahasa cara membuat widget sederhana pada awesomewm.\nMungkin pada tulisan berikutnya akan membahasa tentang bagaimana cara mebuat config awesomewm menjadi\nmodular.</p>\n<p>Ada baiknya sebelum mulai belajar awesomewm terlebih mengetahui\n<a href=\"https://www.tutorialspoint.com/lua/index.htm\">Dasar bahasa pemprograman lua</a>.</p>\n<h2>Disclaimer</h2>\n<p>Saya bukan propgrammer atau developer, cuma orang biasa yang suka menikmati kopi dan drama di internet yang\nkebetulan lagi gabut, jadi mohon maaf apabila kesalahan pada tulisan ini.</p>\n<h2>Apa itu widget</h2>\n<p>Mungkin bagi yang pernah mencoba flutter, atau react native atau bahkan toolkit untuk membuat aplikasi\nberbasis desktop seperti java swing atau electron sudah tidak asing lagi karena pada dasarnya sama.</p>\n<p>Intinya adalah sebuah objek untuk membuat Graphical User Interface (GUI).\nObjek disini bisa berbeda perilakuanya tergantung dengan tujuan diciptakanya.\nMisal flutter dan raect native yang berjalan di android atau java swing dan electron yang berjalan\ndi desktop.</p>\n<h2>Membuat widget</h2>\n<p>Di dalam folder <strong>~/.config/awesome/</strong> kita buat file baru dengan nama <strong>hello-world.lua</strong>.\nlalu di file <strong>rc.lua</strong> kita import <strong>hello-world.lua</strong> dengan cara :</p>\n<div><pre><code><span>require</span><span>(</span><span>'hello-world'</span><span>)</span>\n</code></pre></div>\n<p>cara mengimport di bahasa pemprograman lua memang mirip dengan javascript.\nsekarang mari kita buka file <strong>hello-world.lua</strong> .</p>\n<div><pre><code><span>-- import module wibox dan simpan dalam variabel wibox</span>\n<span>local</span> wibox <span>=</span> <span>require</span><span>(</span><span>'wibox'</span><span>)</span>\n\n<span>-- membuat variabel hello_world yang didalamnya berisi instance dari wibox.</span>\n<span>local</span> hello_world <span>=</span> <span>wibox</span> <span>{</span>\n<span>-- wibox mempunya banyak properties, salah satunya adalah yang kita gunakan dibawah ini.</span>\n   height <span>=</span> <span>500</span><span>,</span>\n   width <span>=</span> <span>500</span><span>,</span>\n   visible <span>=</span> <span>true</span>\n<span>}</span>\n\n<span>return</span> hello_world\n\n</code></pre></div>\n<p>Sekarang coba kita simpan dan restart awesomewm dengan <strong>Super + Ctrl + r</strong> .\nSetelah itu kita akan melihat kotak misterius dipojok kiri atas.</p>\n<p><img src=\"/assets/post/1-tutorial-awesomewm/hello-world-1.png\" alt=\"hello world\"></p>\n<p>Kenapa yang muncul cuma kotak kosong ? karena kita belum memasukan apapun ke dalam situ.\nKita cuma baru membuat kotak dengan tinggi 500 dan lebar 500 lalu <code>visible = true</code> agar dapat terlihat.</p>\n<p>Sekarang kita akan membuat widget yang berisi text \"Hello world\".</p>\n<div><pre><code><span>local</span> text_hello_world <span>=</span> <span>{</span>\n   text <span>=</span> <span>'Hello world'</span><span>,</span>\n   font <span>=</span> <span>'Iosevka Mayukai 30'</span><span>,</span>\n   widget <span>=</span> wibox<span>.</span>widget<span>.</span>textbox\n<span>}</span>\n</code></pre></div>\n<p>Diatas kita membuat variabel <code>text_hello_world</code> yang didalamnya ada objek (di lua disebut tabel\ntapi agar lebih familiar kita sebut objek saja), dengan properties <code>text</code>, <code>font</code> dan <code>widget</code>.\nproperties <code>widget</code> berisi method <code>wibox.widget.textbox</code>, karena kita akan menampilkan text.</p>\n<p>memasukan widget ke dalam wibox</p>\n<div><pre><code>hello_world <span>:</span> <span>setup</span> <span>{</span>\n   text_hello_world<span>,</span>\n   layout <span>=</span> wibox<span>.</span>container<span>.</span>place\n<span>}</span>\n</code></pre></div>\n<p>wibox mempunya method <code>setup</code> untuk mengatur hirarki widget.\nSementara properties <code>layout</code> digunakan untuk mengatur posisi widget.\nDisini kita menggunakan method <strong>wibox.container.place</strong> karena kita ingin teks \"Hello world\" berada\ndi tengah-tengah wibox.</p>\n<h3>full code</h3>\n<div><pre><code><span>local</span> wibox <span>=</span> <span>require</span><span>(</span><span>'wibox'</span><span>)</span>\n\n<span>local</span> hello_world <span>=</span> <span>wibox</span> <span>{</span>\n   height <span>=</span> <span>500</span><span>,</span>\n   width <span>=</span> <span>500</span><span>,</span>\n   visible <span>=</span> <span>true</span>\n<span>}</span>\n\n<span>local</span> text_hello_world <span>=</span> wibox<span>.</span><span>widget</span> <span>{</span>\n   text <span>=</span> <span>'Hello world'</span><span>,</span>\n   font <span>=</span> <span>'Iosevka Mayukai 30'</span><span>,</span>\n   widget <span>=</span> wibox<span>.</span>widget<span>.</span>textbox\n<span>}</span>\n\nhello_world <span>:</span> <span>setup</span> <span>{</span>\n   text_hello_world<span>,</span>\n   layout <span>=</span> wibox<span>.</span>container<span>.</span>place\n<span>}</span>\n\n<span>return</span> hello_world\n</code></pre></div>\n<p><img src=\"/assets/post/1-tutorial-awesomewm/hello-world-2.png\" alt=\"hello world\"></p>\n<h2>Membuat toggle widget</h2>\n<div><pre><code><span>local</span> awful <span>=</span> <span>require</span><span>(</span><span>'awful'</span><span>)</span>\n\n<span>local</span> hello_world <span>=</span> <span>wibox</span> <span>{</span>\n   height <span>=</span> <span>500</span><span>,</span>\n   width <span>=</span> <span>500</span><span>,</span>\n<span>-- set visible menjadi false</span>\n   visible <span>=</span> <span>false</span>\n<span>}</span>\n\n<span>-- membuat fungsi untuk mengatur visible dari wibox hello_world</span>\n<span>local</span> <span>function</span> <span>hello_world_visibility</span><span>(</span><span>)</span>\n   <span>if</span> hello_world<span>.</span>visible <span>==</span> <span>false</span> <span>then</span>\n      hello_world<span>.</span>visible <span>=</span> <span>true</span>\n   <span>else</span>\n      hello_world<span>.</span>visible <span>=</span> <span>false</span>\n   <span>end</span>\n<span>end</span>\n\n<span>-- membuat shortcut/keybind</span>\nawful<span>.</span>keyboard<span>.</span><span>append_global_keybindings</span><span>(</span><span>{</span>\n   awful<span>.</span><span>key</span><span>(</span><span>{</span> <span>\"Mod4\"</span> <span>}</span><span>,</span> <span>\"y\"</span><span>,</span> <span>function</span><span>(</span><span>)</span> <span>hello_world_visibility</span><span>(</span><span>)</span> <span>end</span><span>)</span>\n<span>}</span><span>)</span>\n</code></pre></div>\n<p>Kita dapat memanfaatkan properties <code>visible</code> untuk menjadikan widget kita terlihat atau tidak.\nKemudian kita membuat fungsi yang isinya mengubah vaue dari properties <code>visible</code> yang kemudian\nfungsi tersebut kita panggil saat kita menekan <strong>Mod4 + y</strong> (Mod4 adalah tombol windows atau disebut juga super).</p>\n<h2>Membuat widget kita dapat diclick</h2>\n<p>Untuk membuat widget kita dapa diclick, kita dapat menggunakan method <strong>buttons</strong>.\nUntuk lebih mudah kita akan membuat satu widget lagi yang berisi angka dan ketika angka itu diclik maka\nnilainya akan bertambah.</p>\n<div><pre><code><span>local</span> number <span>=</span> wibox<span>.</span><span>widget</span> <span>{</span>\n   text <span>=</span> <span>1</span><span>,</span>\n   widget <span>=</span> wibox<span>.</span>widget<span>.</span>textbox\n<span>}</span>\n\n<span>local</span> <span>function</span> <span>increment</span><span>(</span><span>)</span>\n   number<span>.</span>text <span>=</span> number<span>.</span>text <span>+</span> <span>1</span>\n<span>end</span>\n\nnumber<span>:</span><span>buttons</span><span>(</span>awful<span>.</span><span>button</span><span>(</span><span>{</span><span>}</span><span>,</span> <span>1</span><span>,</span> <span>function</span><span>(</span><span>)</span> <span>increment</span><span>(</span><span>)</span> <span>end</span><span>)</span><span>)</span>\n</code></pre></div>\n<p>tanda <strong>\":\"</strong> didalam lua merupakan syntax sugar dari method yang parameter pertamanya adalah\ndirinya sendiri.</p>\n<p>contoh :</p>\n<div><pre><code>self<span>.</span><span>hello</span><span>(</span>self<span>,</span> <span>\"hello world\"</span><span>)</span>\n\n<span>-- sama dengan</span>\nself<span>:</span><span>hello</span><span>(</span><span>\"hello world\"</span><span>)</span>\n</code></pre></div>\n<p>Didalam method buttons kita menggunakan method <strong>awful.button</strong> sebagai parameter kedua.</p>\n<p>Oh iya kalau kita perhatikan saat kita membuat toggle untuk memuncukan widget, kita mengisi parameter\npertama pada method <strong>awful.button</strong> dengan <strong>{\"Mod4\"}</strong> dan parameter kedua adalah huruf \"y\".\nKarena kita tidak ingin menggunakan shortcut melainkan mouse maka parameter pertama cukup kita\nkasih objek kosong sedangkan parameter kedua kita isi dengan angka 1.\nKenapa angka 1 ? apakah angka 1 punya maksud tertentu ? jawabanya iya.\nAngka 1 artinya left click pada mouse.\nsedangkan untuk right click adalah angka 3, untuk lebih detailnya\nbisa dilihat documentasi awesome <a href=\"https://awesomewm.org/doc/api/libraries/mouse.html\">disini</a></p>\n<h2>Grouping widget</h2>\n<p>kita ingin membuat widget kita berada di tengah dan ada jarak antara widget <strong>text_hello_world</strong> dan\n<strong>number</strong>. untuk melakukan itu kita butuh properties layout.</p>\n<div><pre><code>hello_world <span>:</span> <span>setup</span> <span>{</span>\n   <span>nil</span><span>,</span>\n   <span>{</span>\n      text_hello_world<span>,</span>\n      number<span>,</span>\n      spacing <span>=</span> <span>20</span><span>,</span>\n      layout <span>=</span> wibox<span>.</span>layout<span>.</span>fixed<span>.</span>vertical\n   <span>}</span><span>,</span>\n   <span>nil</span><span>,</span>\n   expand <span>=</span> <span>\"none\"</span><span>,</span>\n   layout <span>=</span> wibox<span>.</span>layout<span>.</span>align<span>.</span>vertical\n<span>}</span>\n</code></pre></div>\n<p>kenapa ada <code>nil</code> disitu ? karena <strong>wibox.layout.align</strong> membagi layout menjadi 3 dengan mengambil semua\nruang yang ada, jika vertical maka akan menjadi \"atas\", \"tengah\" dan \"bawah\", sedangkan kalau\nhorizontal menjadi \"kiri\", \"tengah\" dan \"kanan\".</p>\n<p>Seperti yang kita singgung sebelumnya, kita ingin widget kita berada ditengah maka \"atas\" dan\n\"bawah\" kita kasih value <code>nil</code>.\nSementara properties <strong>expand = \"none\"</strong> berguna agar widget kita tidak mengambil ruang yang tidak\nterpakai.</p>\n<p>Sedangkan <strong>wibox.layout.fixed</strong> tidak mengambil semua ruang, akan tetapi mengambil ruang berdasarkan\nmasing-masing widget. bedanya <strong>wibox.layout.fixed</strong> dengan <strong>wibox.layout.align</strong> adalah\n<strong>wibox.layout.fixed</strong> mempunyai properties <code>spacing</code>.</p>\n<p>sekarang coba kita simpan dan awesomewm kita restart.\nWidget kita sudah berada ditengah tapi cuma secara vertical, untuk menjadikanya ditenagh secara\nhorizontal kita dapat menggunakan properties <code>align</code> pada masing-masing widget.</p>\n<div><pre><code><span>local</span> text_hello_world <span>=</span> wibox<span>.</span><span>widget</span> <span>{</span>\n   align <span>=</span> <span>'center'</span><span>,</span>\n  <span>}</span>\n\n<span>local</span> number <span>=</span> wibox<span>.</span><span>widget</span> <span>{</span>\n   align <span>=</span> <span>'center'</span><span>,</span>\n  <span>}</span>\n</code></pre></div>\n<h2>Full Code</h2>\n<div><pre><code><span>local</span> wibox <span>=</span> <span>require</span><span>(</span><span>'wibox'</span><span>)</span>\n<span>local</span> awful <span>=</span> <span>require</span><span>(</span><span>'awful'</span><span>)</span>\n\n<span>local</span> hello_world <span>=</span> <span>wibox</span> <span>{</span>\n   height <span>=</span> <span>500</span><span>,</span>\n   width <span>=</span> <span>500</span><span>,</span>\n   ontop <span>=</span> <span>true</span><span>,</span>\n   visible <span>=</span> <span>false</span>\n<span>}</span>\n\n<span>local</span> text_hello_world <span>=</span> <span>{</span>\n   text <span>=</span> <span>'Hello world'</span><span>,</span>\n   align <span>=</span> <span>'center'</span><span>,</span>\n   font <span>=</span> <span>'Iosevka Mayukai 30'</span><span>,</span>\n   widget <span>=</span> wibox<span>.</span>widget<span>.</span>textbox\n<span>}</span>\n\n<span>local</span> number <span>=</span> wibox<span>.</span><span>widget</span> <span>{</span>\n   text <span>=</span> <span>1</span><span>,</span>\n   align <span>=</span> <span>'center'</span><span>,</span>\n   font <span>=</span> <span>'Iosevka Mayukai 20'</span><span>,</span>\n   widget <span>=</span> wibox<span>.</span>widget<span>.</span>textbox\n<span>}</span>\n\n<span>local</span> <span>function</span> <span>increment</span><span>(</span><span>)</span>\n   number<span>.</span>text <span>=</span> number<span>.</span>text <span>+</span> <span>1</span>\n<span>end</span>\n\nnumber<span>:</span><span>buttons</span><span>(</span>awful<span>.</span><span>button</span><span>(</span><span>{</span><span>}</span><span>,</span> <span>1</span><span>,</span> <span>function</span><span>(</span><span>)</span> <span>increment</span><span>(</span><span>)</span> <span>end</span><span>)</span><span>)</span>\n\nhello_world <span>:</span> <span>setup</span> <span>{</span>\n   <span>nil</span><span>,</span>\n   <span>{</span>\n      text_hello_world<span>,</span>\n      number<span>,</span>\n      spacing <span>=</span> <span>20</span><span>,</span>\n      layout <span>=</span> wibox<span>.</span>layout<span>.</span>fixed<span>.</span>vertical\n   <span>}</span><span>,</span>\n   <span>nil</span><span>,</span>\n   expand <span>=</span> <span>\"none\"</span><span>,</span>\n   layout <span>=</span> wibox<span>.</span>layout<span>.</span>align<span>.</span>vertical\n<span>}</span>\n\n<span>local</span> <span>function</span> <span>hello_world_visibility</span><span>(</span><span>)</span>\n   <span>if</span> hello_world<span>.</span>visible <span>==</span> <span>false</span> <span>then</span>\n      hello_world<span>.</span>visible <span>=</span> <span>true</span>\n   <span>else</span>\n      hello_world<span>.</span>visible <span>=</span> <span>false</span>\n   <span>end</span>\n<span>end</span>\n\nawful<span>.</span>keyboard<span>.</span><span>append_global_keybindings</span><span>(</span><span>{</span>\n   awful<span>.</span><span>key</span><span>(</span><span>{</span> <span>\"Mod4\"</span> <span>}</span><span>,</span> <span>\"y\"</span><span>,</span> <span>function</span><span>(</span><span>)</span> <span>hello_world_visibility</span><span>(</span><span>)</span> <span>end</span><span>)</span>\n<span>}</span><span>)</span>\n\n<span>return</span> hello_world\n</code></pre></div>\n<p><img src=\"/assets/post/1-tutorial-awesomewm/hello-world-3.png\" alt=\"hello world\"></p>\n"}},"__N_SSG":true}